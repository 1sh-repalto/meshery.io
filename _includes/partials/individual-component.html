{% assign pattern = page %}
<div class="single-page">

  <div class="modal-image-container">
    <div class="modal-image-single">
      <img style="width: inherit; cursor: pointer;" 
      src="https://raw.githubusercontent.com/layer5labs/meshery-extensions-packages/master/action-assets/design-assets/{{pattern.patternId}}.png" 
      onerror="this.src='/assets/images/patterns/service-mesh.svg'" loading="lazy" onclick="toggleFullScreenImage('{{ pattern.patternId }}')"/>
      <h4 class="related-patterns">Related Patterns</h4>
      <!-- MINICARD-START -->
      {% include related-patterns.html %}

    </div>
  </div>
  <!-- MINICARD-END -->

  {%if pattern.patternInfo%}
  <div>
    <h3>What this pattern does:</h3>
    <p class="pre-white-space">{{pattern.patternInfo | url_decode | replace: '\\n', '<br/>'| replace: '\n', '<br/>' }}</p>
    <h3>Caveats and Consideration: </h3>
    <p class="pre-white-space">{{pattern.patternCaveats | url_decode}}</p>
    </p>
    {%else%}
    <div>
      <h3>What this pattern does:</h3>
      <p class="pre-white-space">{{pattern.filterInfo | url_decode}}</p>
      <h3>Caveats and Consideration: </h3>
      <p class="pre-white-space">{{pattern.filterCaveats | url_decode}}</p>
      </p>
      {%endif%}
      <h3>Compatibility:</h3>

      {% include partials/compatibility.html%}
      {% include copy-and-download.html %}
    </div>
    
  </div>
  <br>
  {% include related-discussion.html tag="meshery" %}
</div>

<script>
  document.title = "{{pattern.name}} | Meshery Catalog";
</script>

<script>
  function toggleFullScreenImage(patternId) {
    var fullScreenContainer = document.getElementById(`fullScreenContainer${patternId}`);

    if (!fullScreenContainer) {
      createFullScreenContainer(patternId);
      document.body.style.overflow = 'hidden';
    } else {
      document.body.removeChild(fullScreenContainer);
      document.body.style.overflow = 'auto';
    }
  }

  function createFullScreenContainer(patternId) {
    var fullScreenContainer = document.createElement('div');
    fullScreenContainer.id = `fullScreenImageContainer${patternId}`;
    fullScreenContainer.style.position = 'fixed';
    fullScreenContainer.style.top = '0';
    fullScreenContainer.style.left = '0';
    fullScreenContainer.style.width = '100%';
    fullScreenContainer.style.height = '100%';
    fullScreenContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
    fullScreenContainer.style.zIndex = '9999';

    var fullScreenImage = document.createElement('img');
    fullScreenImage.id = `fullScreenImage${patternId}`;
    fullScreenImage.className = 'image-class';
    fullScreenImage.alt = 'Full Screen Image';
    fullScreenImage.src = 'https://raw.githubusercontent.com/layer5labs/meshery-extensions-packages/master/action-assets/design-assets/' + patternId + '.png';

    fullScreenImage.onerror = function () {
      this.src = '/assets/images/patterns/service-mesh.svg';
    };
    fullScreenImage.loading = 'lazy';
    fullScreenImage.style.height = '50%';
    fullScreenImage.style.width = '50%';
    fullScreenImage.style.position = 'absolute';
    fullScreenImage.style.left = '50%';
    fullScreenImage.style.top = '45%';
    fullScreenImage.style.transform = 'translate(-50%, -50%)';
    fullScreenContainer.style.cursor = "pointer";


    fullScreenContainer.appendChild(fullScreenImage);

    document.body.appendChild(fullScreenContainer);
    fullScreenContainer.onclick = function () {
      document.body.removeChild(fullScreenContainer);
      document.body.style.overflow = 'auto';
    };
  }
</script>
